<!--个人资料编辑组件-->
<view class="profile-editor {{visible ? 'visible' : ''}}" wx:if="{{visible}}" catch:tap="onMaskTap">
  <!-- 遮罩层 -->
  <view class="editor-mask"></view>
  
  <!-- 编辑器内容 -->
  <view class="editor-content" catch:tap="onContentTap">
    <!-- 简洁标题栏 -->
    <view class="editor-header">
      <view class="header-action" bind:tap="onCancel">
        <text class="action-text cancel">取消</text>
      </view>
      <view class="header-title">
        <text class="title-text">编辑个人资料</text>
      </view>
      <view class="header-action" bind:tap="onSave">
        <text class="action-text save">保存</text>
      </view>
    </view>

    <!-- 表单内容 -->
    <view class="editor-body">
      <!-- 头像选择区域 -->
      <view class="avatar-section">
        <view class="section-header">
          <text class="section-title">选择头像颜色</text>
        </view>
        
        <view class="avatar-container">
          <!-- 头像预览 -->
          <view class="avatar-preview">
            <view 
              class="avatar-display"
              style="background: {{currentAvatarColor}}"
            >
              <text class="avatar-letter">{{avatarText}}</text>
            </view>
          </view>
          
          <!-- 颜色选择器 -->
          <view class="color-palette">
            <view 
              wx:for="{{avatarOptions}}" 
              wx:key="id"
              class="color-item {{profileData.avatar === item.id ? 'active' : ''}}"
              style="background: {{item.color}}"
              data-avatar="{{item.id}}"
              bind:tap="onAvatarSelect"
            >
              <view class="color-indicator" wx:if="{{profileData.avatar === item.id}}">
                <text class="indicator-icon">✓</text>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- 表单字段 -->
      <view class="form-fields">
        <!-- 显示名称 -->
        <view class="field-group">
          <view class="field-header">
            <text class="field-label">显示名称</text>
            <text class="field-required">*</text>
          </view>
          <view class="field-input">
            <input 
              class="input-control"
              type="text"
              placeholder="请输入你的显示名称"
              value="{{profileData.displayName}}"
              maxlength="{{maxDisplayNameLength}}"
              bind:input="onDisplayNameInput"
              bind:blur="onDisplayNameBlur"
            />
          </view>
          <view class="field-footer">
            <text class="char-count">{{displayNameLength}}/{{maxDisplayNameLength}}</text>
          </view>
          <view class="field-error" wx:if="{{errors.displayName}}">
            <text class="error-message">{{errors.displayName}}</text>
          </view>
        </view>

        <!-- 昵称 -->
        <view class="field-group">
          <view class="field-header">
            <text class="field-label">昵称</text>
            <text class="field-optional">（可选）</text>
          </view>
          <view class="field-input">
            <input 
              class="input-control"
              type="text"
              placeholder="请输入昵称"
              value="{{profileData.nickname}}"
              maxlength="{{maxNicknameLength}}"
              bind:input="onNicknameInput"
            />
          </view>
          <view class="field-footer">
            <text class="char-count">{{nicknameLength}}/{{maxNicknameLength}}</text>
          </view>
        </view>

        <!-- 个人简介 -->
        <view class="field-group">
          <view class="field-header">
            <text class="field-label">个人简介</text>
            <text class="field-optional">（可选）</text>
          </view>
          <view class="field-input">
            <textarea 
              class="textarea-control"
              placeholder="简单介绍一下自己吧..."
              value="{{profileData.bio}}"
              maxlength="{{maxBioLength}}"
              bind:input="onBioInput"
              auto-height
            />
          </view>
          <view class="field-footer">
            <text class="char-count">{{bioLength}}/{{maxBioLength}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>