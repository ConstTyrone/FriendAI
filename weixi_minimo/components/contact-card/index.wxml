<!--è”ç³»äººå¡ç‰‡ç»„ä»¶-->
<view 
  class="contact-card {{highlight ? 'highlight' : ''}}" 
  bind:tap="onCardTap"
  bind:longpress="onCardLongPress"
>
  <!-- å¡ç‰‡å¤´éƒ¨ -->
  <view class="card-header">
    <!-- å¤´åƒ -->
    <view 
      class="card-avatar"
      style="background-color: {{contact.avatarColor || '#667eea'}}"
    >
      <text class="card-avatar-text">{{contact.initial || '?'}}</text>
    </view>
    
    <!-- åŸºæœ¬ä¿¡æ¯ï¼ˆç²¾ç®€ç‰ˆï¼‰ -->
    <view class="contact-info">
      <!-- å§“å -->
      <view class="contact-name">
        <text class="name-text">{{contact.displayName || contact.profile_name || 'æœªçŸ¥è”ç³»äºº'}}</text>
      </view>
      
      <!-- å…¬å¸å’ŒèŒåŠ¡ -->
      <view class="contact-company" wx:if="{{contact.company || contact.position}}">
        <text class="company-text">
          {{contact.company}}{{contact.company && contact.position ? ' Â· ' : ''}}{{contact.position}}
        </text>
      </view>
      
      <!-- å…¶ä»–åŸºæœ¬ä¿¡æ¯ï¼šç”µè¯ã€æ€§åˆ«ã€å¹´é¾„ï¼ˆç®€æ´æ˜¾ç¤ºï¼‰ -->
      <view class="contact-basic" wx:if="{{contact.phone || contact.gender || contact.age}}">
        <text class="basic-text" wx:if="{{contact.phone}}">ğŸ“ {{contact.phone}}</text>
        <text class="basic-text" wx:if="{{contact.gender && contact.age}}"> Â· {{contact.gender}} {{contact.age}}å²</text>
        <text class="basic-text" wx:elif="{{contact.gender}}"> Â· {{contact.gender}}</text>
        <text class="basic-text" wx:elif="{{contact.age}}"> Â· {{contact.age}}å²</text>
      </view>
    </view>
  </view>
  
  <!-- AIæ‘˜è¦ï¼ˆå¦‚æœæœ‰ï¼‰ -->
  <view class="card-summary" wx:if="{{contact.ai_summary && showSummary}}">
    <text class="summary-text">{{contact.ai_summary}}</text>
  </view>
  
  <!-- æœ€åæ›´æ–°æ—¶é—´ -->
  <view class="card-footer">
    <view class="update-time" wx:if="{{contact.updated_at}}">
      <t-icon name="time" size="20rpx" color="#c8c9cc" />
      <text class="time-text">{{formatRelativeTime(contact.updated_at)}}</text>
    </view>
    
    <!-- æ“ä½œæŒ‰é’® -->
    <view class="card-actions" wx:if="{{showActions}}">
      <view class="action-btn" bind:tap="onViewDetail">
        <t-icon name="user" size="20rpx" color="#1890ff" />
      </view>
      <view class="action-btn" bind:tap="onEditContact">
        <t-icon name="edit" size="20rpx" color="#52c41a" />
      </view>
      <view class="action-btn" bind:tap="onDeleteContact">
        <t-icon name="delete" size="20rpx" color="#ff4d4f" />
      </view>
    </view>
  </view>
</view>