<!--å…³ç³»å‘ç°æç¤ºç»„ä»¶-->
<view class="relationship-tip {{visible ? 'visible' : ''}} {{themeClass}}" wx:if="{{relationships.length > 0}}">
  <!-- æç¤ºå¡ç‰‡ -->
  <view class="tip-card" bind:tap="onViewDetails">
    <!-- å›¾æ ‡å’Œä¸»è¦ä¿¡æ¯ -->
    <view class="tip-header">
      <view class="tip-icon">
        <text class="icon-text">ğŸ”—</text>
      </view>
      <view class="tip-content">
        <text class="tip-title">å‘ç° {{relationships.length}} ä¸ªå…³ç³»</text>
        <text class="tip-subtitle">{{formatRelationshipTypes(relationships)}}</text>
      </view>
      <view class="tip-arrow">
        <text class="arrow-text">â€º</text>
      </view>
    </view>
    
    <!-- å…³ç³»é¢„è§ˆï¼ˆæœ€å¤šæ˜¾ç¤º3ä¸ªï¼‰ -->
    <view class="relationships-preview" wx:if="{{showPreview}}">
      <view 
        wx:for="{{previewRelationships}}" 
        wx:key="id" 
        class="relationship-preview-item"
      >
        <view class="preview-avatar">
          <text class="preview-avatar-text">{{item.otherProfileInitial}}</text>
        </view>
        <view class="preview-info">
          <text class="preview-name">{{item.otherProfileName}}</text>
          <text class="preview-relation">{{formatRelationshipType(item.relationship_type)}}</text>
        </view>
        <view class="preview-confidence">
          <text class="confidence-text">{{Math.round(item.confidence_score * 100)}}%</text>
        </view>
      </view>
    </view>
    
    <!-- å¿«é€Ÿæ“ä½œæŒ‰é’® -->
    <view class="tip-actions" wx:if="{{showActions}}">
      <view class="action-btn primary" bind:tap="onConfirmAll" catch:tap="stopPropagation">
        <text class="action-text">å…¨éƒ¨ç¡®è®¤</text>
      </view>
      <view class="action-btn secondary" bind:tap="onIgnoreAll" catch:tap="stopPropagation">
        <text class="action-text">å…¨éƒ¨å¿½ç•¥</text>
      </view>
    </view>
  </view>
  
  <!-- å…³é—­æŒ‰é’® -->
  <view class="close-btn" bind:tap="onClose" catch:tap="stopPropagation">
    <text class="close-text">Ã—</text>
  </view>
</view>