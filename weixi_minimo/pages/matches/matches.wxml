<!--匹配结果页面-->
<scroll-view class="matches-page {{themeClass}}" scroll-y="{{true}}" bindscroll="onPageScroll" enhanced="{{true}}" show-scrollbar="{{false}}">
  <!-- 页面头部 -->
  <view class="page-header">
    <text class="back-button" bindtap="onBack">‹ 返回</text>
    <text class="page-title">{{intentName ? intentName + ' - 匹配结果' : '匹配结果'}}</text>
  </view>
  
  <!-- 匹配结果列表 -->
  <view class="match-list" wx:if="{{matches.length > 0}}">
    <view wx:for="{{matches}}" wx:key="id" class="match-card {{item.isHighlighted ? 'highlighted' : ''}}">
      <!-- 匹配信息 -->
      <view class="match-header">
        <view class="match-title-row">
          <text class="intent-name">{{item.intent_name}}</text>
          <!-- AI标识 -->
          <text class="ai-match-badge" wx:if="{{item.isAIMatch}}">AI</text>
        </view>
        <view class="match-score-row">
          <view class="match-score-container">
            <text class="match-score">{{item.scorePercent}}% 匹配</text>
            <!-- 匹配度进度条 -->
            <view class="score-progress">
              <view class="progress-bar" style="width: {{item.scorePercent}}%;"></view>
            </view>
          </view>
          <!-- 向量相似度 -->
          <text class="vector-score" wx:if="{{item.hasVectorSimilarity}}">
            语义: {{item.vectorSimilarity}}%
          </text>
        </view>
      </view>
      
      <!-- 联系人信息 -->
      <view class="profile-section" bindtap="viewProfile" data-id="{{item.profile_id}}">
        <view class="profile-avatar">
          <text class="avatar-text">{{item.profileInitial}}</text>
        </view>
        
        <view class="profile-info">
          <text class="profile-name">{{item.profile_name || '未知'}}</text>
          <text class="profile-title" wx:if="{{item.company || item.position}}">
            {{item.company}}{{item.company && item.position ? ' · ' : ''}}{{item.position}}
          </text>
          <text class="profile-location" wx:if="{{item.location}}">{{item.location}}</text>
        </view>
        
        <text class="view-arrow">›</text>
      </view>
      
      <!-- 匹配解释 -->
      <view class="match-explanation" wx:if="{{item.explanation}}">
        <text class="explanation-label">匹配理由：</text>
        <text class="explanation-text">{{item.explanation}}</text>
      </view>
      
      <!-- 匹配条件 -->
      <view class="match-highlights" wx:if="{{item.matched_conditions && item.matched_conditions.length > 0}}">
        <view wx:for="{{item.matched_conditions}}" wx:for-item="condition" wx:key="index" 
              class="highlight-tag">
          <text class="tag-icon">✓</text>
          <text class="tag-text">{{condition}}</text>
        </view>
      </view>
      
      <!-- 底部信息 -->
      <view class="match-footer">
        <text class="match-time">{{item.createdAtFormat}}</text>
        <view class="match-type-wrapper" wx:if="{{item.matchTypeDisplay}}">
          <text class="match-type-text">{{item.matchTypeDisplay}}</text>
        </view>
      </view>
    </view>
    
    <!-- 重新匹配按钮（列表末尾） -->
    <view class="bottom-trigger" wx:if="{{intentId}}">
      <button class="trigger-match-btn" bindtap="triggerMatch">
        重新匹配
      </button>
    </view>
  </view>
  
  <!-- 空状态 - 现代化设计 -->
  <view class="empty-state" wx:if="{{!loading && matches.length === 0}}">
    <text class="empty-title">暂无匹配结果</text>
    <text class="empty-desc">调整意图条件或降低匹配阈值，AI会为您找到更多潜在匹配</text>
  </view>
  
  <!-- 加载状态 -->
  <view class="loading-state" wx:if="{{loading}}">
    <text class="loading-text">加载中...</text>
  </view>
</scroll-view>